# CORE_CONCEPTS.md

Este documento define el **lenguaje fundamental del sistema**.

Si un concepto no está aquí, **no existe** en el MVP.
Si un concepto se malentiende aquí, el sistema se romperá después.

---

## 1. Project

### Definition

A **Project** represents a real software codebase where AI assistance must behave consistently.

### Responsibilities

* Acts as the execution boundary for AI behavior
* Groups stack, ruleset and commands under a single context

### Properties (conceptual)

* id
* name
* stackPreset
* activeRuleset

### Ownership

* Created by the user
* Governed by the system

---

## 2. Stack Preset

### Definition

A **Stack Preset** is an opinionated description of the technical environment of a project.

It defines *what kind of code* the AI is allowed to produce.

### Responsibilities

* Establish framework and language assumptions
* Select a default ruleset

### Examples

* Next.js 15 (App Router)
* Vite + React (SPA)
* Node.js (TypeScript)

### Ownership

* System-owned
* Not editable by the user (MVP)

---

## 3. Rule

### Definition

A **Rule** is a non-negotiable constraint that limits AI behavior.

Rules are **not suggestions**.
If a rule is active, it must be enforced.

### Characteristics

* Deterministic
* Explicit
* Enforceable

### Examples

* No new dependencies
* Prefer server components
* Avoid over-engineering

### Ownership

* System-owned
* Invisible as primitives to the user

---

## 4. Ruleset

### Definition

A **Ruleset** is a curated collection of rules applied together.

It represents a **coherent philosophy**, not a random list.

### Responsibilities

* Group compatible rules
* Avoid conflicting constraints

### Characteristics

* Opinionated
* Finite
* Predictable

### Ownership

* System-owned
* User can only toggle included rules

---

## 5. Command

### Definition

A **Command** is an explicit action requested by the user.

Commands replace prompt writing.

### Responsibilities

* Declare user intent
* Define allowed scope of execution

### Examples

* /create-component
* /refactor-file
* /review-changes

### Ownership

* System-owned
* User executes, not defines

---

## 6. Intent

### Definition

An **Intent** describes *why* a command is executed.

It is an internal abstraction used by the system.

### Examples

* Generate code
* Refactor existing code
* Review changes

### Notes

* Intents are **never shown to the user**
* Each command maps to exactly one intent

---

## 7. Resolver

### Definition

The **Resolver** is the core decision engine of the system.

It transforms user actions into an explicit execution contract.

### Responsibilities

* Resolve command → intent
* Load project context
* Select applicable rules
* Resolve conflicts deterministically
* Produce a ResolvedContract

### Constraints

* Pure logic (no AI)
* Deterministic
* Stateless

### Ownership

* System-only

---

## 8. ResolvedContract

### Definition

A **ResolvedContract** is the explicit, final instruction sent to the AI.

It defines exactly what the AI can and cannot do.

### Characteristics

* Human-readable
* Strict
* Non-negotiable

### Contains

* Intent (translated to human language)
* Active rules
* Constraints
* Stack context
* Stop conditions

### Ownership

* Generated by the system
* Read-only for the user

---

## 9. Relationships Overview

```
User
  ↓ executes
Command
  ↓ maps to
Intent
  ↓ processed by
Resolver
  ↓ produces
ResolvedContract
  ↓ executed by
AI Model
```

---

## 10. Conceptual Guardrails

* Users never create rules
* Users never edit contracts
* AI never infers intent
* If a rule conflicts, execution must stop

---

## 11. Guiding Principle

> Concepts must remain boring and predictable.
> If a concept becomes flexible, it becomes dangerous.

## 12. Aclaraciones importantes

### Definición canónica (para que la tengas grabada)

El usuario selecciona rulesets predefinidos por el sistema.
El sistema traduce esos rulesets a reglas ejecutables.
El Resolver compila un contrato final.
El agente obedece ese contrato.

Fin. No hay más capas.

### Cómo explicarlo en una frase
> “El sistema compila intención + contexto técnico en un contrato explícito que cualquier agente de IA debe obedecer.”

O más crudo, para devs senior:

> “No le decimos a la IA qué hacer. Le decimos qué no puede hacer.”

### Regla mental para no desviarte
Si alguna vez te preguntas:

> “¿Esto lo define el usuario o el sistema?”

La respuesta correcta en este producto es:

> “El sistema define. El usuario elige. El resolver decide.”

Si rompes eso → vuelves al prompt-hell.